# 步骤 5：生成输出

## 任务目标

将修复后的文件写入输出目录，生成日志文件。

## 执行操作

### 1. 创建输出目录
确保 `{OUTPUT_DIR}` 目录存在

### 2. 写入修复后的文件
- 将修复后的 .xaml 文件写入 `{OUTPUT_DIR}` 目录
- 将修复后的 .xaml.cs 文件写入 `{OUTPUT_DIR}` 目录

### 3. 生成日志文件
在 `{OUTPUT_DIR}` 目录中创建 `{LOG_FILE}`，记录修复过程和结果

## 日志记录

将以下信息写入 `{OUTPUT_DIR}/{LOG_FILE}`：

```markdown
# 代码修复日志

## 文件信息

- WinForms 原始文件：[文件名]
- WPF 转换结果：[文件名]
- Transcode 日志：[文件名]
- Review 日志：[文件名]

## 问题汇总

### Transcode 日志中发现的问题

[列出 transcode 日志中的问题]

### Review 日志中发现的问题

[列出 review 日志中的问题]

## 修复记录

### XAML 文件修复

[记录 XAML 文件的修复内容]

### 代码隐藏文件修复

[记录 .xaml.cs 文件的修复内容]

## 修复结果

- 修复的问题数量：[数量]
- 输出文件：[文件列表]
```

## 下一步

继续执行：[步骤 6：完成](./step_06_completion.md)

---

## 错误处理

### 常见错误及处理方式

**错误 1：输出目录创建失败**
- 症状：无法创建输出目录
- 处理：检查目录路径是否正确，检查权限
- 日志记录：在日志中记录目录路径和错误信息

**错误 2：文件写入失败**
- 症状：无法写入修复后的文件
- 处理：检查输出目录是否可写，检查磁盘空间
- 日志记录：在日志中记录文件路径和错误信息

**错误 3：日志文件生成失败**
- 症状：无法生成日志文件
- 处理：检查日志文件路径是否正确，检查权限
- 日志记录：在控制台输出错误信息

### 错误恢复策略
- 如果输出目录创建失败，尝试使用备用路径
- 如果文件写入失败，尝试写入备用路径
- 如果日志文件生成失败，尝试写入备用路径

### 错误日志格式
```
[ERROR] [步骤5] 输出目录创建失败: [目录路径]
[ERROR] [步骤5] 文件写入失败: [文件路径]
[ERROR] [步骤5] 日志文件生成失败: [文件路径]
```