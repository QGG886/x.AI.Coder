# 步骤 2：分析日志

## 任务目标

读取 transcode 日志和 review 日志，分析转换过程中记录的问题。

## 执行操作

1. **读取 transcode 日志**：分析转换过程中记录的问题和注意事项
2. **读取 review 日志**：分析审查报告中记录的问题（错改、漏改、多改、需确认）
3. **汇总问题列表**：将两个日志中的问题合并，按优先级排序

## 问题分类

- **错改**：应该改但改错了的地方
- **漏改**：应该改但没改的地方
- **多改**：不应该改但改了的地方
- **需确认**：不确定是否正确，需要人工确认的地方

## 日志记录

将以下信息追加到临时日志文件 `{OUTPUT_DIR}/{LOG_FILE}.tmp`：

```markdown
## 步骤2：分析日志

### Transcode 日志中发现的问题
- [问题描述]
- [问题描述]

### Review 日志中发现的问题
- [问题描述]
- [问题描述]

### 问题汇总
- 错改问题：X 个
- 漏改问题：X 个
- 多改问题：X 个
- 需确认问题：X 个
```

## 下一步

继续执行：[步骤 3：加载规则](./step_03_rule_loading.md)

---

## 错误处理

### 常见错误及处理方式

**错误 1：日志文件读取失败**
- 症状：无法读取日志文件
- 处理：检查日志文件路径是否正确，文件是否存在
- 日志记录：在日志中记录日志文件路径和错误信息

**错误 2：日志格式错误**
- 症状：无法解析日志文件
- 处理：检查日志文件格式，记录问题
- 日志记录：在日志中记录日志格式错误

**错误 3：问题汇总失败**
- 症状：无法正确汇总问题
- 处理：记录警告，继续处理
- 日志记录：在日志中记录问题汇总失败的原因

### 错误恢复策略
- 如果日志文件读取失败，跳过该日志文件，继续处理其他日志文件
- 如果日志格式错误，记录警告，继续处理
- 如果问题汇总失败，记录警告，继续处理

### 错误日志格式
```
[ERROR] [步骤2] 日志文件读取失败: [文件路径]
[ERROR] [步骤2] 日志格式错误: [文件名]
[WARNING] [步骤2] 问题汇总失败: [原因]
```