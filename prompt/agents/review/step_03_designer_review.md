# 步骤 3：设计器代码审查

## 任务目标

根据设计器代码转换规则检查 XAML 文件转换的正确性。

## 执行操作

### 1. 加载审查规则

按照 `prompt/rules/rule_index.md` 中的规则加载流程，加载设计器代码审查规则：
- 读取 `prompt/rules/rule_index.md`
- 根据文件内容识别需要加载的规则文件
- 按优先级加载规则文件

### 2. 执行审查

对每对设计器文件进行审查：
- 读取 WinForms `.Designer.cs` 文件
- 读取 WPF `.xaml` 文件
- 按加载的规则逐一检查
- 记录发现的问题

## 重要说明

**忽略被注释的代码**：
- 在审查过程中，遇到被注释的代码（以 `//` 或 `<!-- -->` 包裹的代码），直接忽略，不需要提醒删除
- 不需要报告"注释的代码需要删除"这类问题
- 只关注实际生效的代码转换是否正确

## 检查项目

### 必须检查的项目
1. **控件映射**：所有控件是否正确映射到 WPF 控件
2. **控件命名**：x:Name 是否与原 Name 一致
3. **布局结构**：布局是否正确转换
4. **属性迁移**：所有属性是否正确迁移
5. **属性值**：属性值是否正确转换
6. **事件绑定**：事件是否正确绑定到后台方法
7. **嵌套关系**：控件嵌套关系是否保持一致

## 问题分类

- **错改**：应该改但改错了的地方
- **漏改**：应该改但没改的地方
- **多改**：不应该改但改了的地方
- **需确认**：不确定是否正确，需要人工确认的地方

## 日志记录

将以下信息追加到临时报告文件 `{OUTPUT_DIR}\{REPORT_FILE}.tmp`：

```markdown
## 步骤3：设计器代码审查

### 审查的文件对
- [WinForms.Designer.cs] ↔ [WPF.xaml]
- [WinForms.Designer.cs] ↔ [WPF.xaml]

### 详细审查结果

#### 文件对：[WinForms.Designer.cs] ↔ [WPF.xaml]

##### 错改问题
- [规则名称] [控件名].[属性]：[问题描述]
- [规则名称] [控件名].[事件]：[问题描述]

##### 漏改问题
- [规则名称] [控件名].[属性]：[问题描述]
- [规则名称] [控件名].[属性]：[问题描述]

##### 多改问题
- [规则名称] [控件名]：[问题描述]
- [规则名称] [控件名]：[问题描述]

##### 需确认问题
- [规则名称] [控件名].[属性]：[问题描述]
- [规则名称] [布局结构]：[问题描述]

##### 正确的转换
- [控件名]：[转换说明]
- [控件名].[属性]：[转换说明]

（继续记录其他文件对...）

### 审查统计
- 错改问题：X 个
- 漏改问题：X 个
- 多改问题：X 个
- 需确认问题：X 个
```

## 下一步

继续执行：[步骤 4：生成审查报告](./step_04_generate_report.md)