# 步骤 1：文件分析

## 任务目标

识别 `{FILES}` 中的文件类型和基本信息，为后续转换做准备。

## 执行操作

1. 列出所有待处理文件
2. 按类型分类：
   - `.Designer.cs` → 设计器代码文件
   - 其他 `.cs` → 后台代码文件
3. 统计文件数量

## 日志记录

将以下信息写入临时日志文件 `{OUTPUT_DIR}/{LOG_FILE}.tmp`：

```markdown
## 步骤1：文件分析

### 文件夹路径
- 当前处理路径：[文件夹路径]

### 文件列表
- 总文件数：X
- 设计器代码文件：X
- 后台代码文件：X

### 文件分类结果
#### 设计器代码文件
- [文件名]
- [文件名]

#### 后台代码文件
- [文件名]
- [文件名]

### 发现的问题
- [问题描述]
```

## 下一步

继续执行：[步骤 2：后台代码转换](./step_02_backend_conversion.md)

---

## 错误处理

### 常见错误及处理方式

**错误 1：文件读取失败**
- 症状：无法读取文件内容
- 处理：检查文件路径是否正确，文件是否存在
- 日志记录：在日志中记录文件路径和错误信息

**错误 2：文件类型识别错误**
- 症状：无法正确识别文件类型
- 处理：检查文件扩展名，使用默认分类
- 日志记录：在日志中记录无法识别的文件

**错误 3：文件数量异常**
- 症状：文件数量不符合预期
- 处理：检查是否缺少必要的文件
- 日志记录：在日志中记录缺少的文件

### 错误恢复策略
- 如果文件读取失败，跳过该文件，继续处理其他文件
- 如果文件类型识别错误，使用默认分类，继续处理
- 如果文件数量异常，记录警告，继续处理

### 错误日志格式
```
[ERROR] [步骤1] 文件读取失败: [文件路径]
[ERROR] [步骤1] 文件类型识别错误: [文件名]
[WARNING] [步骤1] 文件数量异常: 期望 [X] 个文件，实际 [Y] 个
```